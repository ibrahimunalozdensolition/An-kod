{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../app/components/Navbar.tsx","../../../../app/auth/verify-phone/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","\"use client\";\n\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { useAuth } from \"@/lib/context/AuthContext\";\n\nexport default function Navbar() {\n  const pathname = usePathname();\n  const { user, loading, signOut } = useAuth();\n\n  const navItems = [\n    { href: \"/nasil-calisir\", label: \"Nasıl Çalışır?\" },\n    { href: \"/hakkimizda\", label: \"Hakkımızda\" },\n    { href: \"/iletisim\", label: \"İletişim\" },\n  ];\n\n  const handleSignOut = async () => {\n    try {\n      await signOut();\n    } catch (error) {\n      console.error('Çıkış hatası:', error);\n    }\n  };\n\n  const getDashboardLink = () => {\n    if (!user) return \"/dashboard\";\n    if (user.role === \"admin\") return \"/admin\";\n    if (user.role === \"producer\") return \"/producer\";\n    return \"/dashboard\";\n  };\n\n  return (\n    <nav className=\"fixed left-0 right-0 top-0 z-50 border-b border-[#d2d2d7]/30 bg-[#fbfbfd]/80 backdrop-blur-xl\">\n      <div className=\"mx-auto flex h-[48px] max-w-[980px] items-center justify-between px-6\">\n        \n        <Link \n          href=\"/\" \n          className=\"text-[21px] font-semibold tracking-[-0.01em] text-[#1d1d1f] transition-opacity hover:opacity-70\"\n        >\n          ANIKOD\n        </Link>\n\n        <div className=\"flex items-center gap-8\">\n          {navItems.map((item) => (\n            <Link\n              key={item.href}\n              href={item.href}\n              className={`text-[14px] font-normal leading-[1.43] transition-colors ${\n                pathname === item.href\n                  ? \"text-[#1d1d1f]\"\n                  : \"text-[#6e6e73] hover:text-[#1d1d1f]\"\n              }`}\n            >\n              {item.label}\n            </Link>\n          ))}\n        </div>\n\n        {loading ? (\n          <div className=\"h-[32px] w-[80px] animate-pulse rounded-full bg-[#d2d2d7]\" />\n        ) : user ? (\n          <div className=\"flex items-center gap-3\">\n            <Link\n              href={getDashboardLink()}\n              className=\"inline-flex h-[32px] items-center justify-center rounded-full bg-[#0071e3] px-4 text-[12px] font-normal text-white transition-all duration-200 hover:bg-[#0077ed]\"\n            >\n              Panel\n            </Link>\n            <button\n              onClick={handleSignOut}\n              className=\"inline-flex h-[32px] items-center justify-center rounded-full border border-[#d2d2d7] px-4 text-[12px] font-normal text-[#1d1d1f] transition-all duration-200 hover:border-[#86868b]\"\n            >\n              Çıkış\n            </button>\n          </div>\n        ) : (\n          <Link\n            href=\"/auth/login\"\n            className=\"inline-flex h-[32px] items-center justify-center rounded-full bg-[#0071e3] px-4 text-[12px] font-normal text-white transition-all duration-200 hover:bg-[#0077ed]\"\n          >\n            Giriş Yap\n          </Link>\n        )}\n\n      </div>\n    </nav>\n  );\n}\n","\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { RecaptchaVerifier, signInWithPhoneNumber, PhoneAuthProvider, linkWithCredential } from \"firebase/auth\";\nimport { doc, updateDoc } from \"firebase/firestore\";\nimport { auth, db } from \"@/lib/firebase/config\";\nimport { useAuth } from \"@/lib/context/AuthContext\";\nimport { phoneVerificationSchema, PhoneVerificationFormData } from \"@/lib/validations/auth\";\nimport Navbar from \"@/app/components/Navbar\";\n\ndeclare global {\n  interface Window {\n    recaptchaVerifier: RecaptchaVerifier;\n    confirmationResult: any;\n  }\n}\n\nexport default function VerifyPhonePage() {\n  const router = useRouter();\n  const { user, refreshUser } = useAuth();\n  const [error, setError] = useState<string>(\"\");\n  const [loading, setLoading] = useState(false);\n  const [codeSent, setCodeSent] = useState(false);\n  const [resendTimer, setResendTimer] = useState(60);\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm<PhoneVerificationFormData>({\n    resolver: zodResolver(phoneVerificationSchema),\n  });\n\n  useEffect(() => {\n    if (!user) {\n      router.push(\"/auth/login\");\n      return;\n    }\n\n    if (user.phoneVerified) {\n      router.push(\"/dashboard\");\n      return;\n    }\n\n    setupRecaptcha();\n  }, [user, router]);\n\n  useEffect(() => {\n    if (codeSent && resendTimer > 0) {\n      const timer = setTimeout(() => setResendTimer(resendTimer - 1), 1000);\n      return () => clearTimeout(timer);\n    }\n  }, [codeSent, resendTimer]);\n\n  const setupRecaptcha = () => {\n    if (!window.recaptchaVerifier) {\n      window.recaptchaVerifier = new RecaptchaVerifier(auth, 'recaptcha-container', {\n        size: 'invisible',\n        callback: () => {\n          console.log('reCAPTCHA solved');\n        },\n      });\n    }\n  };\n\n  const sendVerificationCode = async () => {\n    if (!user) return;\n\n    try {\n      setError(\"\");\n      setLoading(true);\n      \n      const appVerifier = window.recaptchaVerifier;\n      const confirmationResult = await signInWithPhoneNumber(auth, user.phoneNumber, appVerifier);\n      window.confirmationResult = confirmationResult;\n      \n      setCodeSent(true);\n      setResendTimer(60);\n    } catch (err: any) {\n      console.error(err);\n      setError(\"Doğrulama kodu gönderilirken bir hata oluştu. Lütfen tekrar deneyin.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const onSubmit = async (data: PhoneVerificationFormData) => {\n    if (!user) return;\n\n    try {\n      setError(\"\");\n      setLoading(true);\n\n      const result = await window.confirmationResult.confirm(data.code);\n\n      await updateDoc(doc(db, 'users', user.uid), {\n        phoneVerified: true,\n        updatedAt: new Date(),\n      });\n\n      await refreshUser();\n      router.push(\"/dashboard\");\n    } catch (err: any) {\n      console.error(err);\n      if (err.code === \"auth/invalid-verification-code\") {\n        setError(\"Doğrulama kodu hatalı\");\n      } else {\n        setError(\"Doğrulama sırasında bir hata oluştu. Lütfen tekrar deneyin.\");\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!user) {\n    return null;\n  }\n\n  return (\n    <>\n      <Navbar />\n      <div className=\"flex min-h-screen items-center justify-center bg-[#fbfbfd] px-4 pt-[48px]\">\n      <div className=\"w-full max-w-md\">\n          <div className=\"animate-fade-in-up mb-8 text-center\">\n            <h1 className=\"text-[32px] font-semibold leading-[1.08] tracking-[-0.015em] text-[#1d1d1f] sm:text-[40px]\">Telefon Doğrulama</h1>\n            <p className=\"mt-2 text-[17px] leading-[1.47] text-[#6e6e73]\">\n            {user.phoneNumber} numarasına gönderilen kodu giriniz\n          </p>\n        </div>\n\n          <div className=\"animate-fade-in-up animate-delay-100 rounded-2xl bg-white p-8 shadow-sm\">\n          {error && (\n            <div className=\"mb-6 rounded-lg bg-red-50 p-4 text-[14px] text-red-600\">\n              {error}\n            </div>\n          )}\n\n          {!codeSent ? (\n            <div className=\"space-y-5\">\n              <p className=\"text-[14px] text-[#6e6e73]\">\n                Telefon numaranızı doğrulamak için SMS ile bir kod göndereceğiz.\n              </p>\n              <button\n                onClick={sendVerificationCode}\n                disabled={loading}\n                className=\"w-full rounded-full bg-[#0071e3] py-3 text-[17px] font-medium text-white transition-colors hover:bg-[#0077ed] disabled:opacity-50\"\n              >\n                {loading ? \"Gönderiliyor...\" : \"Doğrulama Kodu Gönder\"}\n              </button>\n            </div>\n          ) : (\n            <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-5\">\n              <div>\n                <label htmlFor=\"code\" className=\"mb-2 block text-[14px] font-medium text-[#1d1d1f]\">\n                  Doğrulama Kodu\n                </label>\n                <input\n                  {...register(\"code\")}\n                  type=\"text\"\n                  id=\"code\"\n                  maxLength={6}\n                  className=\"w-full rounded-lg border border-[#d2d2d7] px-4 py-3 text-center text-[24px] tracking-widest outline-none transition-colors focus:border-[#0071e3] focus:ring-1 focus:ring-[#0071e3]\"\n                  placeholder=\"000000\"\n                />\n                {errors.code && (\n                  <p className=\"mt-1 text-[12px] text-red-600\">{errors.code.message}</p>\n                )}\n              </div>\n\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"w-full rounded-full bg-[#0071e3] py-3 text-[17px] font-medium text-white transition-colors hover:bg-[#0077ed] disabled:opacity-50\"\n              >\n                {loading ? \"Doğrulanıyor...\" : \"Doğrula\"}\n              </button>\n\n              {resendTimer > 0 ? (\n                <p className=\"text-center text-[14px] text-[#6e6e73]\">\n                  Yeni kod gönderebilmek için {resendTimer} saniye bekleyin\n                </p>\n              ) : (\n                <button\n                  type=\"button\"\n                  onClick={sendVerificationCode}\n                  className=\"w-full text-[14px] text-[#0071e3] hover:underline\"\n                >\n                  Kodu Tekrar Gönder\n                </button>\n              )}\n            </form>\n          )}\n        </div>\n\n        <div id=\"recaptcha-container\"></div>\n      </div>\n    </div>\n    </>\n  );\n}\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml","ReactServerDOMTurbopackClient"],"mappings":"+iBAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACC,gBAAgB,8BCFvCJ,GAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACE,kBAAkB,+BCFzCL,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACG,kBAAkB,+BCFzCN,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,YAAY,CAAEI,6BAA6B,0CCAtD,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACtB,IAAM,EAAW,CAAA,EAAA,EAAA,WAAA,AAAW,IACtB,MAAE,CAAI,SAAE,CAAO,SAAE,CAAO,CAAE,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IAQpC,EAAgB,UACpB,GAAI,CACF,MAAM,GACR,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,gBAAiB,EACjC,CACF,EASA,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yGACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kFAEb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAK,IACL,UAAU,2GACX,WAID,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCACZ,AAjCQ,CACf,CAAE,KAAM,iBAAkB,MAAO,gBAAiB,EAClD,CAAE,KAAM,cAAe,MAAO,YAAa,EAC3C,CAAE,KAAM,YAAa,MAAO,UAAW,EACxC,CA6BiB,GAAG,CAAC,AAAC,GACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAEH,KAAM,EAAK,IAAI,CACf,UAAW,CAAC,yDAAyD,EACnE,IAAa,EAAK,IAAI,CAClB,iBACA,sCAAA,CACJ,UAED,EAAK,KAAK,EARN,EAAK,IAAI,KAanB,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8DACb,EACF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAtCL,AAAL,CAsCgB,CArCE,EADd,EAAO,KACgB,CAAvB,EAAK,IAAI,CAAqB,SAChB,YAAY,CAA1B,EAAK,IAAI,CAAwB,YAC9B,aAHW,aAuCR,UAAU,6KACX,UAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,UAAU,gMACX,aAKH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAK,cACL,UAAU,6KACX,kBAQX,iECrFA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OASe,SAAS,IACtB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,MAAE,CAAI,aAAE,CAAW,CAAE,CAAG,CAAA,EAAA,EAAA,OAAO,AAAP,IACxB,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,IACrC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACnC,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAEzC,UACJ,CAAQ,cACR,CAAY,CACZ,UAAW,CAAE,QAAM,CAAE,CACtB,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,EAA4B,CACrC,SAAU,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,EAAA,uBAAuB,CAC/C,GAEA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACH,AAAL,EAKI,EAAK,AALL,EAAO,WAKW,CACpB,CADsB,CACf,IAAI,CAAC,cAId,IATE,EAAO,IAAI,CAAC,cAUhB,EAAG,CAAC,EAAM,EAAO,EAEjB,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GAAI,GAAY,EAAc,EAAG,CAC/B,IAAM,EAAQ,WAAW,IAAM,EAAe,EAAc,GAAI,KAChE,MAAO,IAAM,aAAa,EAC5B,CACF,EAAG,CAAC,EAAU,EAAY,EAE1B,IAAM,EAAiB,KACjB,AAAC,OAAO,iBAAiB,EAAE,CAC7B,OAAO,iBAAiB,CAAG,IAAI,EAAA,iBAAiB,CAAC,EAAA,IAAI,CAAE,sBAAuB,CAC5E,KAAM,YACN,SAAU,KACR,QAAQ,GAAG,CAAC,mBACd,CACF,EAAA,CAEJ,EAEM,EAAuB,UAC3B,GAAK,CAAD,CAEJ,GAAI,CAFO,AAGT,EAAS,IACT,EAAW,IAEX,IAAM,EAAc,OAAO,iBAAiB,CACtC,EAAqB,MAAM,CAAA,EAAA,EAAA,qBAAA,AAAqB,EAAC,EAAA,IAAI,CAAE,EAAK,WAAW,CAAE,GAC/E,OAAO,kBAAkB,CAAG,EAE5B,GAAY,GACZ,EAAe,GACjB,CAAE,MAAO,EAAU,CACjB,QAAQ,KAAK,CAAC,GACd,EAAS,uEACX,QAAU,CACR,GAAW,EACb,CACF,EAEM,EAAW,MAAO,IACtB,GAAK,CAAD,CAEJ,GAAI,CACF,AAHS,EAGA,IACT,GAAW,GAEI,MAAM,OAAO,kBAAkB,CAAC,OAAO,CAAC,EAAK,IAAI,EAEhE,MAAM,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,CAAA,EAAA,EAAA,GAAA,AAAG,EAAC,EAAA,EAAE,CAAE,QAAS,EAAK,GAAG,EAAG,CAC1C,eAAe,EACf,UAAW,IAAI,IACjB,GAEA,MAAM,IACN,EAAO,IAAI,CAAC,aACd,CAAE,MAAO,EAAU,CACjB,QAAQ,KAAK,CAAC,GACG,kCAAkC,CAA/C,EAAI,IAAI,CACV,EAAS,yBAET,EAAS,8DAEb,QAAU,CACR,GAAW,EACb,CACF,SAEA,AAAK,EAKH,CAAA,CALE,CAKF,CALS,CAKT,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAM,CAAA,CAAA,GACP,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qFACf,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4BACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gDACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,sGAA6F,sBAC3G,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,2DACZ,EAAK,WAAW,CAAC,4CAIpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oFACd,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kEACZ,IAIJ,AAAC,EAcA,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAa,GAAW,UAAU,sBAChD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,QAAQ,OAAO,UAAU,6DAAoD,mBAGpF,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACE,GAAG,EAAS,OAAO,CACpB,KAAK,OACL,GAAG,OACH,UAAW,EACX,UAAU,sLACV,YAAY,WAEb,EAAO,IAAI,EACV,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAiC,EAAO,IAAI,CAAC,OAAO,MAIrE,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,SAAU,EACV,UAAU,6IAET,EAAU,kBAAoB,YAGhC,EAAc,EACb,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,mDAAyC,+BACvB,EAAY,sBAG3C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,QAAS,EACT,UAAU,6DACX,0BAhDL,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,qEAG1C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,SAAU,EACV,UAAU,6IAET,EAAU,kBAAoB,gCA+CvC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,GAAG,gCA/EL,IAoFX","ignoreList":[0,1,2,3]}