(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,13056,e=>{"use strict";var t=e.i(43476),r=e.i(71645);e.i(51718);var a=e.i(18357);e.i(36180);var i=e.i(98925),u=e.i(33842);let n=(0,r.createContext)(void 0);function s({children:e}){let[s,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(!0),l=async e=>{try{let t=await (0,i.getDoc)((0,i.doc)(u.db,"users",e.uid));if(!t.exists())return null;let r=t.data();return{uid:e.uid,email:e.email,phoneNumber:r.phoneNumber||"",phoneVerified:r.phoneVerified||!1,role:r.role||"customer",createdAt:r.createdAt?.toDate()||new Date,updatedAt:r.updatedAt?.toDate()||new Date}}catch(e){return console.error("Error fetching user data:",e),null}},h=async()=>{u.auth.currentUser&&o(await l(u.auth.currentUser))};(0,r.useEffect)(()=>{let e=(0,a.onAuthStateChanged)(u.auth,async e=>{e?o(await l(e)):o(null),c(!1)});return()=>e()},[]);let m=async(e,t)=>{await (0,a.signInWithEmailAndPassword)(u.auth,e,t)},A=async(e,t,r)=>{let n=(await (0,a.createUserWithEmailAndPassword)(u.auth,e,t)).user;await (0,i.setDoc)((0,i.doc)(u.db,"users",n.uid),{email:n.email,phoneNumber:r,phoneVerified:!1,role:"customer",createdAt:(0,i.serverTimestamp)(),updatedAt:(0,i.serverTimestamp)()}),await (0,a.sendEmailVerification)(n)},p=async()=>{await (0,a.signOut)(u.auth)};return(0,t.jsx)(n.Provider,{value:{user:s,loading:d,signIn:m,signUp:A,signOut:p,refreshUser:h},children:e})}function o(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}e.s(["AuthProvider",()=>s,"useAuth",()=>o])}]);