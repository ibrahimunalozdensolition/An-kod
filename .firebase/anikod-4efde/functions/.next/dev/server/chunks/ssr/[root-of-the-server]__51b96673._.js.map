{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///Users/ibrahimunal/Projects/ANIKOD/lib/firebase/config.ts"],"sourcesContent":["import { initializeApp, getApps } from 'firebase/app';\nimport { getAuth } from 'firebase/auth';\nimport { getFirestore } from 'firebase/firestore';\nimport { getStorage } from 'firebase/storage';\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n};\n\nconst app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApps()[0];\n\nexport const auth = getAuth(app);\nexport const db = getFirestore(app);\nexport const storage = getStorage(app);\nexport default app;\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP;AAEA,MAAM,MAAM,IAAA,2KAAO,IAAG,MAAM,KAAK,IAAI,IAAA,iLAAa,EAAC,kBAAkB,IAAA,2KAAO,GAAE,CAAC,EAAE;AAE1E,MAAM,OAAO,IAAA,6KAAO,EAAC;AACrB,MAAM,KAAK,IAAA,iLAAY,EAAC;AACxB,MAAM,UAAU,IAAA,kMAAU,EAAC;uCACnB"}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"sources":["file:///Users/ibrahimunal/Projects/ANIKOD/lib/context/AuthContext.tsx"],"sourcesContent":["\"use client\";\n\nimport { createContext, useContext, useEffect, useState } from 'react';\nimport { \n  User as FirebaseUser,\n  onAuthStateChanged,\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  signOut as firebaseSignOut,\n  sendEmailVerification,\n} from 'firebase/auth';\nimport { doc, getDoc, setDoc, serverTimestamp } from 'firebase/firestore';\nimport { auth, db } from '@/lib/firebase/config';\nimport { User, AuthState, UserRole } from '@/lib/types/user';\n\ninterface AuthContextType extends AuthState {\n  signIn: (email: string, password: string) => Promise<void>;\n  signUp: (email: string, password: string, phoneNumber: string) => Promise<void>;\n  signOut: () => Promise<void>;\n  refreshUser: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  const fetchUserData = async (firebaseUser: FirebaseUser): Promise<User | null> => {\n    try {\n      const userDoc = await getDoc(doc(db, 'users', firebaseUser.uid));\n      \n      if (!userDoc.exists()) {\n        return null;\n      }\n\n      const userData = userDoc.data();\n      return {\n        uid: firebaseUser.uid,\n        email: firebaseUser.email!,\n        phoneNumber: userData.phoneNumber || '',\n        phoneVerified: userData.phoneVerified || false,\n        role: userData.role || 'customer',\n        createdAt: userData.createdAt?.toDate() || new Date(),\n        updatedAt: userData.updatedAt?.toDate() || new Date(),\n      };\n    } catch (error) {\n      console.error('Error fetching user data:', error);\n      return null;\n    }\n  };\n\n  const refreshUser = async () => {\n    if (auth.currentUser) {\n      const userData = await fetchUserData(auth.currentUser);\n      setUser(userData);\n    }\n  };\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\n      if (firebaseUser) {\n        const userData = await fetchUserData(firebaseUser);\n        setUser(userData);\n      } else {\n        setUser(null);\n      }\n      setLoading(false);\n    });\n\n    return () => unsubscribe();\n  }, []);\n\n  const signIn = async (email: string, password: string) => {\n    await signInWithEmailAndPassword(auth, email, password);\n  };\n\n  const signUp = async (email: string, password: string, phoneNumber: string) => {\n    const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n    const firebaseUser = userCredential.user;\n\n    await setDoc(doc(db, 'users', firebaseUser.uid), {\n      email: firebaseUser.email,\n      phoneNumber: phoneNumber,\n      phoneVerified: false,\n      role: 'customer' as UserRole,\n      createdAt: serverTimestamp(),\n      updatedAt: serverTimestamp(),\n    });\n\n    await sendEmailVerification(firebaseUser);\n  };\n\n  const signOut = async () => {\n    await firebaseSignOut(auth);\n  };\n\n  const value: AuthContextType = {\n    user,\n    loading,\n    signIn,\n    signUp,\n    signOut,\n    refreshUser,\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;AAQA;AAAA;AACA;AAZA;;;;;;AAsBA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAAiC;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,MAAM,gBAAgB,OAAO;QAC3B,IAAI;YACF,MAAM,UAAU,MAAM,IAAA,2KAAM,EAAC,IAAA,wKAAG,EAAC,+HAAE,EAAE,SAAS,aAAa,GAAG;YAE9D,IAAI,CAAC,QAAQ,MAAM,IAAI;gBACrB,OAAO;YACT;YAEA,MAAM,WAAW,QAAQ,IAAI;YAC7B,OAAO;gBACL,KAAK,aAAa,GAAG;gBACrB,OAAO,aAAa,KAAK;gBACzB,aAAa,SAAS,WAAW,IAAI;gBACrC,eAAe,SAAS,aAAa,IAAI;gBACzC,MAAM,SAAS,IAAI,IAAI;gBACvB,WAAW,SAAS,SAAS,EAAE,YAAY,IAAI;gBAC/C,WAAW,SAAS,SAAS,EAAE,YAAY,IAAI;YACjD;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,6BAA6B;YAC3C,OAAO;QACT;IACF;IAEA,MAAM,cAAc;QAClB,IAAI,iIAAI,CAAC,WAAW,EAAE;YACpB,MAAM,WAAW,MAAM,cAAc,iIAAI,CAAC,WAAW;YACrD,QAAQ;QACV;IACF;IAEA,IAAA,kNAAS,EAAC;QACR,MAAM,cAAc,IAAA,wLAAkB,EAAC,iIAAI,EAAE,OAAO;YAClD,IAAI,cAAc;gBAChB,MAAM,WAAW,MAAM,cAAc;gBACrC,QAAQ;YACV,OAAO;gBACL,QAAQ;YACV;YACA,WAAW;QACb;QAEA,OAAO,IAAM;IACf,GAAG,EAAE;IAEL,MAAM,SAAS,OAAO,OAAe;QACnC,MAAM,IAAA,gMAA0B,EAAC,iIAAI,EAAE,OAAO;IAChD;IAEA,MAAM,SAAS,OAAO,OAAe,UAAkB;QACrD,MAAM,iBAAiB,MAAM,IAAA,oMAA8B,EAAC,iIAAI,EAAE,OAAO;QACzE,MAAM,eAAe,eAAe,IAAI;QAExC,MAAM,IAAA,2KAAM,EAAC,IAAA,wKAAG,EAAC,+HAAE,EAAE,SAAS,aAAa,GAAG,GAAG;YAC/C,OAAO,aAAa,KAAK;YACzB,aAAa;YACb,eAAe;YACf,MAAM;YACN,WAAW,IAAA,oLAAe;YAC1B,WAAW,IAAA,oLAAe;QAC5B;QAEA,MAAM,IAAA,2LAAqB,EAAC;IAC9B;IAEA,MAAM,UAAU;QACd,MAAM,IAAA,6KAAe,EAAC,iIAAI;IAC5B;IAEA,MAAM,QAAyB;QAC7B;QACA;QACA;QACA;QACA;QACA;IACF;IAEA,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;kBAC1B;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}}]
}